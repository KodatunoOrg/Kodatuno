【ソフト名】
   Kodatuno R1.0
   (Kanazawa univ's Open Developed Alternative Trajectory Utility Nucleus Object) 
	
【ライセンス】
   Kodatunoはオープンソースソフトウェアです。
   GNUの一般使用許可契約(GPL)に基づいて利用願います。
	
【制作日】
   R1.0 2010/03

【連絡先】
   ご意見、ご要望、問い合わせ等は下記電子メールでお送りください。
	
   金沢大学 理工研究域 機械工学系 マンマシン研究室
   浅川直紀
   k-info@mm.hm.t.kanazawa-u.ac.jp
	
【配布】
   下記URLよりダウンロードできます。
	
    http://www-mm.hm.t.kanazawa-u.ac.jp/research/kodatuno/
	
【動作確認環境】
   ・WindowsXP/Vista 
   ・FreeBSD: 6.2-RELEASE, compiler: gcc3.4.6
   ・Debian: GNU/Linux ver5.0, Kernel: 2.6.26-2-686, compiler: gcc4.3.2
   ・Ubuntu: 8.10, compiler: gcc4.2.4
	
【開発環境】
   C/C++ (C++寄りのC)

―――――――――――――――――――――――――――――――――――――――――――
≪免責事項≫
　このソフトウェアを使用したことによって生じたすべての障害・損害・不具合等に関しては、
私と私の関係者および私の所属するいかなる団体・組織とも、一切の責任を負いません。各自
の責任においてご使用ください。


・はじめに

　Kodatunoは純国産のマルチプラットフォームなオープンソースCAMカーネルを目指し開発中の
ソフトウェアです。マルチプラットフォーム環境を確保するため、開発言語はC/C++を用いてお
り、3D描画用APIにOpenGL GLUTを用いています。本ソフトウェアは、CADデータの中間フォーマ
ットであるIGES(JAMA-IS V1.04)ファイルをパースし、描画します。このパースされたCADデータ
を構成する全ての曲線・曲面エンティティは、内部表現としてNURBSに変換され、保持される構
造となっています。
　本ソフトウェアの開発目的は、NURBS曲線/曲面に対する各種操作、演算関数を各種用意し、
CAM開発者がこれら関数を組み合わせることによって、それぞれの目的に即したアプリケーショ
ンを構築することが可能となることです。
  現時点(2010/3現在)では、全てのCAM開発者の目的を満足させるほどの機能はまだまだ持ち合
わせておりません。まずはKodatuno R1.0を皆様に見ていただき、さらなる発展のためのご協力、
ご助言が頂けることを期待しております。


・ファイル構成

1)KODATUNO.h/.cpp
　KODATUNOアプリケーションクラスを定義しています。KODATUNOアプリケーションのmain()が
ここに記述されており、main()内でKODATUNOアプリケーションクラスのオブジェクトが生成さ
れます。

2)BODY.h/.cpp
　IGES(JAMA-IS V1.04)に準拠した構造体およびそれらのメモリ確保、解放関数等を定義してい
ます。KODATUNOでは、読み込まれた立体モデルのことをBODYを呼びます。また、BODYを構成す
る曲線/曲面をエンティティと呼びます。

3)StdAfx.h/.cpp
  汎用的な関数(ベクトル・行列の演算、代数計算、メモリー確保等)を定義しています。今後、
量が増えてきたらそれぞれをモジュールとして分離させる予定です。

4)IGES_Parser.h/.cpp
  IGES(JAMA-IS V1.04)ファイルを読み込み、立体情報をBODY構造体へ格納します。

5)Describe_BODY.h/.cpp
  BODY構造体を描画するためのAPIを用意しています。BODYを構成する全ての要素(NURBS曲線・
曲面)の描画には、OpenGLが用意する関数(gluNurbsSurface()やgluNurbsCurve()など)を用いて
います。

6)Describe.h/1.cpp/2.cpp
  描画セクションです。GLUTが提供するコールバック関数はここに記述されています。また、
上述のDescribe_BODYクラスを継承しています。

7)Quaternion.h/.cpp
  描画セクションでの座標系回転用に用いています。他への利用も考えてモジュール化してあ
ります。

8)NURBS_Func.h/.cpp
  NURBS曲線/曲面の各種操作関数をモジュール化したクラスです。
　まだまだ関数の数は少ないです。

-----ここまでがカーネル------

9)UserFunc.h/.cpp
  CAM開発者が上記カーネルを利用するためのプラットフォームとなる場所です。ここに任意の
コードを記述し、個々のCAMアプリケーションを作成することになります。

10)Sample.h/.cpp
  サンプルプログラム。サンプルIGESファイルとして「FreeSurf.IGS」を用意しています。
FreeSurf.IGSに対して等高線を計算し、表示するプログラムが記述されています。

11)FreeSurf.IGS
  IGESファイルのサンプルです。

12)Makefile
  UNIX環境を利用する場合は、このMakefileをmakeしてください。


・使い方(サンプルプログラム実行まで)

1)本ソフトウェアはOpenGL GLUTを用いています。各OSに適合したGLUTパッケージをインストー
　ルしてください。
2)全てのソースファイルに対してコンパイルを実行してください。UNIX環境の場合は同封の
　Makefileを実行します。Visual Studioの場合は全てのソースファイルに対してソリューショ
　ンを生成し、ビルドを実行して下さい。
3)生成された実行ファイルを実行すると、IGESファイル入力待ち状態になりますので、読み込
　みたいIGESファイル名を入力してください。IGESファイルは複数読み込むことが可能です。
　正常に読み込みが完了すると、描画領域が生成され、読み込んだIGESデータ(BODY)を立体表
　示します。描画領域上では、以下に示す操作が可能です。

　<描画領域における各種操作>
　a)拡大 ----- キーボード上矢印 or Ctrl+左ドラッグで右方向へマウスを移動
　b)縮小 ----- キーボード下矢印 or Ctrl+左ドラッグで左方向へマウスを移動
　c)平行移動 --- Shift+左ドラッグ
　d)回転 ----- 真ん中ドラッグ
  e)ピッキング --- 左クリック
  f)スィープセレクション --- 左ドラッグ
　g)メニュー --- 右クリック

　現在、以下のメニューが登録されています。
  a)Execute User Function --- CAM開発者はこのメニューを通して独自の関数を実行すること
			　　　が出来ます。現在は、6つの関数をメニュー登録できます。
  b)Selection Cancel --- セレクションをキャンセルします。
  c)Draw BODY ON/OFF --- BODYの表示/非表示を切り替えます。
  d)Draw Surface ON/OFF --- 曲面の描画(アウトライン表示/ポリゴン表示)を切り替えます。
  e)View Angle --- X方向、Y方向、Z方向からの視点に切り替えます。
  g)Version Info --- バージョン情報を出力します。

4)サンプルとして用意されたFreeSurf.IGSを読み込んだ場合、描画領域に自由曲面が表示され
　ます。曲面を選択すると、黄色にハイライト表示されます。エッジを選択すると、ピンクに
　ハイライトされます。(サンプルではエッジに対する処理は記述されていません。)
　曲面選択状態で、メニューより"Execute User Function" --> "Exec Sample Func"と選択す
　ると、等高線算出処理が開始されます。計算が終了すると、FreeSurfに対して、Z方向に3mm
　ピッチの等高線(点群)が表示されます。緑色の点は曲面上の点を表し、赤色の線は、単位法
　線ベクトルです。

・今後の開発目標
　1.マルチプラットフォーム対応GUIの実装
　2.NURBS演算モジュールの充実
  3.IGES(JAMA-IS V1.04)以外のファイルフォーマットへの対応
  4.リファレンスマニュアルの作成


・クレジット
  総指揮：浅川直紀（金沢大学）
  開発コアチーム：高杉敬吾（金沢大学），熊坂拓也（金沢大学）


・謝辞
  本システムの基礎開発に尽力いただいた元マンマシン研究室の西野高志，松本健児，三枝史岳の
  諸氏に感謝します．


・開発履歴
  2010/03 Kodatuno R1.0  リリース
