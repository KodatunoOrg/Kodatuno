<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<HTML> 
<HEAD LANG="ja"> 
	<TITLE>Kodatuno User's Guide</TITLE> 
	<meta HTTP-EQUIV="Content-type" CONTENT="text/html; charset=euc-jp"> 
</HEAD> 
<BODY bgcolor="#ffffff"> 
<table cellspacing="0" cellpadding="0" border="0" width="100%">   
	<tr valign="top" height="32">   
	</tr>   
	<tr valign="top">        
		<td width="256" valign="bottom" align="left">          
			<IMG SRC="pixmaps/logo.jpg" width="300" height="98" alt="Kodatuno Logo" ALIGN="top">
		</td>        
		<td valign="bottom" align="center">          
			<center> 	   
		<b><big>Kodatuno User's Guide</big>
		</b>
		<center>        
		</td>       
		<td width="20%" valign="bottom" align="right">          
			<A HREF="./3-6.html" TARGET="_top">Prev</A>     
			<A HREF="./index.html" TARGET="_top">Index</A>          
			<A HREF="./3-8.html" TARGET="_top">Next</A><br>     
		</td>   
	</tr> 
</table> 
<blockquote> 

<BR><HR><H2>ユーザー部</H2>

【UserFunc.h】<BR><BR>
Kodatunoカーネル部とUserアプリケーション部を繋ぐブリッジとして機能します。ユーザーはここに独自のソースコードを記述します。<BR>

<BR>■シンボル
<pre><font size="3">
#define LABELNAMEMAX    256    メニューに登録するメニュー名バッファ 
#define USERFUNCNUMMAX  5      UserFuncの最大登録数 
#define USERPROPNUM     15     利用できるUserプロパティ数 
</font></pre>

<HR>
<BR>■インクルードライブラリ<BR><BR>
"BODY.h" "Command.h" " StdAfx.h" "UserFuncSub.h"<BR><BR>

<HR>
<BR>■型定義
<pre><font size="3">
＜Userステータス値格納用構造体  ＞
typedef struct{  
    int Mode;                    Userステータスの"Mode"番号 
    double Prop[USERPROPNUM];    Userステータスの15個のプロパティ値 
}UserStat_;  
   
＜5つのUserボタンをenumで定義＞
enum Sub_Menu_Label{  
    M_Label1,                 ボタン1
    M_Label2,                 ボタン2
    M_Label3,                 ボタン3
    M_Label4,                 ボタン4
    M_Label5                  ボタン5
};   
</font></pre>

<HR>
<BR>■クラス<BR><BR>
USER<BR>
<継承><BR>
なし<BR><BR>

<HR>
<BR>■関数(Class USER)<BR><BR>

<pre><font size="3">
<A NAME="USER()"> </A>
<H4>public
USER();</H4>
＜説明＞
    コンストラクタ
    ユーザが独自に作成した関数とUserボタンとの関連付け及び、Userステータスの初期化を行う。  
＜引数＞  
   なし
＜戻り値＞  
    なし

<A NAME="UserFunc()"> </A>
<H4>public
int (USER::*UserFunc[USERFUNCNUMMAX])(BODYList *BodyList,OBJECTList *ObjList,int pickcount); </H4>
＜説明＞
    UserFunc関数へのポインタ  
＜引数＞  
    *BodyList：BODYリストの先頭アドレス  
    *ObjList：セレクションされたエンティティの情報(セレクションの数だけリスト化) 
    pickcount：セレクション数  
＜戻り値＞  
    成功：KOD_TRUE  
    失敗：KOD_FALSE 


<A NAME="GetMenuLabelName()"> </A>
<H4>public
char *GetMenuLabelName(int val);  </H4>
＜説明＞
    Userボタンラベル名を取得する。  
＜引数＞  
    val：ラベル番号  
＜戻り値＞  
    成功：ラベル名  
    失敗：NULL 

<A NAME="SetMenuLabelName()"> </A>
<H4>public
void SetMenuLabelName();  </H4>
＜説明＞
    Userメニュー名を登録する。(Userボタンの表示名) 
＜引数＞  
    なし  
＜戻り値＞  
    なし 

<A NAME="RegistUserCommand()"> </A>
<H4>public
void RegistUserCommand(CommandMap *CmdMap); </H4>
＜説明＞
    Userコマンドを登録する。  
＜引数＞  
    *CmdMap：コマンドマップ  
＜戻り値＞  
    なし 

<A NAME="Command()"> </A>
<H4>public
void Command(BODYList *BodyList,OBJECTList *ObjList,int pickcount,int CmdNo,int argc,char *argv[]); </H4>
＜説明＞
    Userコマンドを実行する。  
＜引数＞  
    *BodyList：BODYリストの先頭アドレス  
    *ObjList：セレクションされたエンティティの情報(セレクションの数だけリスト化) 
    pickcount：セレクション数  
    CmdNo：実行されたコマンド番号  
    argc：コマンドライン引数の数  
    *argv[]：コマンドライン引数  
＜戻り値＞  
    なし  
 

<A NAME="MasterUserFunc()"> </A>
<H4>public
int MasterUserFunc(BODYList *,OBJECTList *,int); </H4>
＜説明＞
    UserFunc関数へのポインタの初期値として使用する。 
＜引数＞  
    *BodyList：BODYリストの先頭アドレス  
    *ObjList：セレクションされたエンティティの情報(セレクションの数だけリスト化) 
    pickcount：セレクション数  
＜戻り値＞  
    成功：KOD_TRUE 

<A NAME="SetUserStatus()"> </A>
<H4>public
void SetUserStatus(int,double []);  </H4>
＜説明＞
    UserステータスをUserStat構造体に格納する。 
＜引数＞  
    mode：モード番号  
    prop[]：プロパティ  
＜戻り値＞  
    なし 

<A NAME="ExecdClear()"> </A>
<H4>public
void ExecdClear();  </H4>
＜説明＞
    KODATUNOのViewメニューのCanncelボタンが押されるとこの関数が実行される。 
＜引数＞  
    なし  
＜戻り値＞  
    なし 

<A NAME="ExecWSFunc()"> </A>
<H4>public
int ExecWSFunc(int);  </H4>
＜説明＞
    UserがWSの機能を使い新たなDialogをポップアップさせたい場合は、ここにそのWS処理を記述する。 
＜引数＞  
    val：ラベル番号  
＜戻り値＞  
    成功：KOD_TRUE 

<A NAME="CalcIntersecPts()"> </A>
<H4>private  
int CalcIntersecPts(BODYList *BodyList,OBJECTList *ObjList,int pickcount); </H4>
＜説明＞
 サンプル。  
＜引数＞  
    *BodyList：BODYリストの先頭アドレス  
    *ObjList：セレクションされたエンティティの情報(セレクションの数だけリスト化) 
    pickcount：セレクション数  
＜戻り値＞  
    成功：KOD_TRUE  
    失敗：KOD_FALSE 
</font></pre>

<HR>
<BR>■変数(Class Describe_BODY)
<pre><font size="3">
private
char MenuLabel1[LABELNAMEMAX];             User関数1のメニュー名
char MenuLabel2[LABELNAMEMAX];             User関数2のメニュー名
char MenuLabel3[LABELNAMEMAX];             User関数3のメニュー名
char MenuLabel4[LABELNAMEMAX];             User関数4のメニュー名
char MenuLabel5[LABELNAMEMAX];             User関数5のメニュー名
UserStat_  UserStat;                       Userステータス
</font></pre>


</blockquote> <HR> Document Release 2.0 for Kodatuno R2.0, Nov. 2011<P> <hr> <center>
			<A HREF="./3-6.html" TARGET="_top">Prev</A>     
			<A HREF="./index.html" TARGET="_top">Index</A>          
			<A HREF="./3-8.html" TARGET="_top">Next</A><br>     
</center> <hr> <table cellpadding="0" cellspacing="0" border="0" width="100%">    
<tr>      
	<td align="left">        
		<small>Copyright(C) Kodatuno Development Team, 2011</small>      
	</td>      
	<td align="right">        
		<small><i>Last modified: Nov. 11, 2011</i></small>      
	</td>   
</tr> </table>  <!-- end of body --> </body>  
</html>  

